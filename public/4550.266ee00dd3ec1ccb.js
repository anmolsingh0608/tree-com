"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4550],{76:(X,I,d)=>{d.d(I,{GW:()=>y,dk:()=>U,oK:()=>h});var h=(()=>{return(a=h||(h={})).Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS",h;var a})(),y=(()=>{return(a=y||(y={})).Rear="REAR",a.Front="FRONT",y;var a})(),U=(()=>{return(a=U||(U={})).Uri="uri",a.Base64="base64",a.DataUrl="dataUrl",U;var a})()},7423:(X,I,d)=>{d.d(I,{Uw:()=>z,fo:()=>q,xz:()=>R});var h=d(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var _=(()=>{return(e=_||(_={})).Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE",_;var e})();class R extends Error{constructor(r,o,s){super(r),this.message=r,this.code=o,this.data=s}}const k=e=>{var r,o,s,p,P;const Z=e.CapacitorCustomPlatform||null,l=e.Capacitor||{},N=l.Plugins=l.Plugins||{},v=e.CapacitorPlatforms,W=(null===(r=v?.currentPlatform)||void 0===r?void 0:r.getPlatform)||(()=>null!==Z?Z.name:(e=>{var r,o;return e?.androidBridge?"android":null!==(o=null===(r=e?.webkit)||void 0===r?void 0:r.messageHandlers)&&void 0!==o&&o.bridge?"ios":"web"})(e)),H=(null===(o=v?.currentPlatform)||void 0===o?void 0:o.isNativePlatform)||(()=>"web"!==W()),Q=(null===(s=v?.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(c=>!(!u.get(c)?.platforms.has(W())&&!g(c))),g=(null===(p=v?.currentPlatform)||void 0===p?void 0:p.getPluginHeader)||(c=>{var m;return null===(m=l.PluginHeaders)||void 0===m?void 0:m.find(x=>x.name===c)}),u=new Map,A=(null===(P=v?.currentPlatform)||void 0===P?void 0:P.registerPlugin)||((c,m={})=>{const x=u.get(c);if(x)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),x.proxy;const T=W(),D=g(c);let L;const le=function(){var b=(0,h.Z)(function*(){return!L&&T in m?L=L="function"==typeof m[T]?yield m[T]():m[T]:null!==Z&&!L&&"web"in m&&(L=L="function"==typeof m.web?yield m.web():m.web),L});return function(){return b.apply(this,arguments)}}(),K=b=>{let w;const S=(...E)=>{const F=le().then(C=>{const M=((b,w)=>{var S,E;if(!D){if(b)return null===(E=b[w])||void 0===E?void 0:E.bind(b);throw new R(`"${c}" plugin is not implemented on ${T}`,_.Unimplemented)}{const F=D?.methods.find(C=>w===C.name);if(F)return"promise"===F.rtype?C=>l.nativePromise(c,w.toString(),C):(C,M)=>l.nativeCallback(c,w.toString(),C,M);if(b)return null===(S=b[w])||void 0===S?void 0:S.bind(b)}})(C,b);if(M){const J=M(...E);return w=J?.remove,J}throw new R(`"${c}.${b}()" is not implemented on ${T}`,_.Unimplemented)});return"addListener"===b&&(F.remove=(0,h.Z)(function*(){return w()})),F};return S.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(S,"name",{value:b,writable:!1,configurable:!1}),S},se=K("addListener"),ae=K("removeListener"),ce=(b,w)=>{const S=se({eventName:b},w),E=function(){var C=(0,h.Z)(function*(){const M=yield S;ae({eventName:b,callbackId:M},w)});return function(){return C.apply(this,arguments)}}(),F=new Promise(C=>S.then(()=>C({remove:E})));return F.remove=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield E()}),F},j=new Proxy({},{get(b,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return D?ce:se;case"removeListener":return ae;default:return K(w)}}});return N[c]=j,u.set(c,{name:c,proxy:j,platforms:new Set([...Object.keys(m),...D?[T]:[]])}),j});return l.convertFileSrc||(l.convertFileSrc=c=>c),l.getPlatform=W,l.handleError=c=>e.console.error(c),l.isNativePlatform=H,l.isPluginAvailable=Q,l.pluginMethodNoop=(c,m,x)=>Promise.reject(`${x} does not have an implementation of "${m}".`),l.registerPlugin=A,l.Exception=R,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},O=(e=>e.Capacitor=k(e))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),q=O.registerPlugin;class z{constructor(r){this.listeners={},this.windowListeners={},r&&(console.warn(`Capacitor WebPlugin "${r.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=r)}addListener(r,o){var s=this;this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(o);const P=this.windowListeners[r];P&&!P.registered&&this.addWindowListener(P);const Z=function(){var N=(0,h.Z)(function*(){return s.removeListener(r,o)});return function(){return N.apply(this,arguments)}}(),l=Promise.resolve({remove:Z});return Object.defineProperty(l,"remove",{value:(N=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Z()}),function(){return N.apply(this,arguments)})}),l;var N}removeAllListeners(){var r=this;return(0,h.Z)(function*(){r.listeners={};for(const o in r.windowListeners)r.removeWindowListener(r.windowListeners[o]);r.windowListeners={}})()}notifyListeners(r,o){const s=this.listeners[r];s&&s.forEach(p=>p(o))}hasListeners(r){return!!this.listeners[r].length}registerWindowListener(r,o){this.windowListeners[o]={registered:!1,windowEventName:r,pluginEventName:o,handler:s=>{this.notifyListeners(o,s)}}}unimplemented(r="not implemented"){return new O.Exception(r,_.Unimplemented)}unavailable(r="not available"){return new O.Exception(r,_.Unavailable)}removeListener(r,o){var s=this;return(0,h.Z)(function*(){const p=s.listeners[r];if(!p)return;const P=p.indexOf(o);s.listeners[r].splice(P,1),s.listeners[r].length||s.removeWindowListener(s.windowListeners[r])})()}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){!r||(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}}},4550:(X,I,d)=>{d.r(I),d.d(I,{TreesModule:()=>Q});var h=d(6895),y=d(9625),U=d(5861),a=d(4719),ee=d(7423),$=d(76);const G=(0,ee.fo)("Camera",{web:()=>d.e(3954).then(d.bind(d,3954)).then(n=>new n.CameraWeb)});var _=d(6529),R=d(2340);const Y=[{value:"Spreading",option:"Spreading"},{value:"Irregular",option:"Irregular"},{value:"Columnar",option:"Columnar"},{value:"Round",option:"Round"},{value:"Pyramidal",option:"Pyramidal"},{value:"Vase",option:"Vase"},{value:"Upright",option:"Upright"},{value:"Oval",option:"Oval"}],k=[{value:"Cone",option:"Cone"},{value:"Nut",option:"Nut/Nutlet/Acorn"},{value:"Seedless",option:"Seedless"},{value:"Pod",option:"Pod"},{value:"Berry",option:"Berry/Drupe"},{value:"Samara",option:"Samara"},{value:"Edible",option:"Edible"}],te=[{value:"Small",option:"Small < 30\u2019"},{value:"Medium",option:"Medium 30-40\u2019"},{value:"Large",option:"Large > 40\u2019"}],O=[{value:"Red",option:"Red"},{value:"Pink",option:"Pink"},{value:"Yellow",option:"Yellow"},{value:"Purple",option:"Purple"},{value:"White",option:"White"}],q=[{value:"Scarlet",option:"Scarlet"},{value:"Gold",option:"Gold"},{value:"Orange",option:"Orange"},{value:"Bronze",option:"Bronze"},{value:"Evergreen",option:"Evergreen"}],re=[{value:"Spring",option:"Spring (April-May)"},{value:"Summer",option:"Summer (June-August)"},{value:"Fall",option:"Fall (September)"}],ne=[{value:"Fast",option:"Fast"},{value:"Moderate",option:"Moderate"},{value:"Slow",option:"Slow"}],z=[{value:"Eastern US",option:"Eastern US"},{value:"North America",option:"North America"},{value:"Non-Native",option:"Non-Native"}],ie=[{value:"Salt",option:"Salt"},{value:"Drought",option:"Drought"},{value:"Soil Compaction",option:"Soil Compaction"},{value:"Shade",option:"Shade"},{value:"Flood",option:"Flood"},{value:"Wind",option:"Wind"}];var e=d(6353),r=d(1308),o=d(4465),s=d(8447),p=d(2977),P=d(1248);function Z(n,g){if(1&n&&(e.TgZ(0,"div",3)(1,"label"),e._uU(2),e.qZA(),e._UZ(3,"ng-select",16),e.qZA()),2&n){const t=g.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(1),e.s9C("formControlName",t.name),e.Q6J("items",null==t?null:t.item)("addTag",!0)("hideSelected",!0)("multiple",!0)}}function l(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().index,f=e.oxw();return e.KtG(f.imageUpload(u))}),e._uU(1," Upload Image + "),e.qZA()}}function N(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"img",22),e.TgZ(2,"span",23),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().$implicit,f=e.oxw();return e.KtG(f.delete(u.id))}),e._uU(3,"\xd7"),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.hYB("src","",i.webUrl,"/",null==t?null:t.path,"",e.LSH),e.xp6(1),e.s9C("id",null==t?null:t.id)}}function v(n,g){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,l,2,0,"button",18),e.YNc(2,N,4,3,"div",19),e.qZA()),2&n){const t=g.$implicit;e.xp6(1),e.Q6J("ngIf",!t||!t.path||!t.path.length),e.xp6(1),e.Q6J("ngIf",(null==t||null==t.path?null:t.path.length)>0)}}let B=(()=>{class n{constructor(t,i,u,f,A){this.route=t,this.router=i,this.treeService=u,this.toastService=f,this.filterService=A,this.filtersArr=["form","flowerColor","flowerTime","fruit","fallColor","tolerances","size","growthRate","nativeRegion"],this.subscriptions=[],this.treeData={},this.treeForm=new a.cw({name:new a.NI("",a.kI.required),scientificName:new a.NI(""),use:new a.NI(""),notes:new a.NI(""),images:new a.NI([])}),this.webUrl=R.N.webUrl,this.imagesArray=[],this.imagesIdArray=[],this.form=Y,this.fruit=k,this.size=te,this.flowerColor=O,this.flowerTime=re,this.growthRate=ne,this.nativeRegion=z,this.fallColor=q,this.tolerances=ie,this.filters=[],this.convertBlobToBase64=c=>new Promise((m,x)=>{const T=new FileReader;T.onerror=x,T.onload=()=>{m(T.result)},T.readAsDataURL(c)})}ngOnInit(){const t=this.filterService.getFilters().subscribe(u=>{this.filters=u.data,this.mapOrder(this.filters,this.filtersArr,"name"),this.filters.forEach(f=>{let A=new a.NI("");this.treeForm.controls[f.name]=A})});this.subscriptions.push(t);const i=this.route.params.subscribe(u=>{u.id&&(this.treeId=u.id,this.treeService.getTree(u.id).subscribe(f=>{this.treeData=f.data,delete this.treeData.id,this.treeForm.patchValue(this.treeData),this.imagesArray=this.treeData.images}))});this.subscriptions.push(i)}mapOrder(t,i,u){return t.sort(function(f,A){var m=A[u];return i.indexOf(f[u])>i.indexOf(m)?1:-1}),t}saveForm(){this.treeForm.updateValueAndValidity(),this.treeForm.invalid?this.toastService.presentToast("Please fill all the required fields"):(this.treeForm.value.images=this.imagesArray.map(t=>t.id).filter(t=>!!t),this.treeId?this.treeService.updateTree({...this.treeForm.value,id:this.treeId}).subscribe(t=>{this.navigateToList()}):this.treeService.createTree(this.treeForm.value).subscribe(t=>{this.navigateToList()}))}navigateToList(){this.router.navigate(["/admin/trees/"])}image(){this.imagesArray.push({type:_.X.TREE})}imageUpload(t){var i=this;return(0,U.Z)(function*(){let u;u=yield G.getPhoto({resultType:$.dk.DataUrl,quality:100,allowEditing:!1,source:$.oK.Photos}),u||i.toastService.presentToast("Problem selecting image!"),i.treeService.createImage(u.dataUrl,_.X.TREE).subscribe(f=>{i.imagesArray[t]=f.data})})()}saveImage(t,i){}readAsBase64(t){var i=this;return(0,U.Z)(function*(){const f=yield(yield fetch(t.webPath)).blob();return yield i.convertBlobToBase64(f)})()}delete(t){const i=this.treeService.deleteImage(t).subscribe(u=>{this.imagesArray.splice(this.imagesArray.findIndex(f=>t===f.id),1)});this.subscriptions.push(i)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.gz),e.Y36(y.F0),e.Y36(r.z),e.Y36(o.k),e.Y36(s.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:29,vars:3,consts:[[1,"container"],[1,"header","d-flex","justify-content-between"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Enter name",1,"form-control"],["for","scientificName"],["type","text","id","scientificName","formControlName","scientificName","placeholder","Scientific name",1,"form-control"],["for","use"],["type","text","id","use","formControlName","use","placeholder","Use",1,"form-control"],["class","form-group",4,"ngFor","ngForOf"],["for","notes"],["type","text","id","notes","formControlName","notes","placeholder","Enter notes...",1,"form-control"],["class","form-group col-12 border mt-2",4,"ngFor","ngForOf"],[1,"btn","btn-primary","mt-2","mb-2",3,"click"],[1,"btn","btn-primary","mt-2",3,"click"],[3,"items","formControlName","addTag","hideSelected","multiple"],[1,"form-group","col-12","border","mt-2"],["class","btn btn-secondary mt-2",3,"click",4,"ngIf"],["class","img-wrap mt-2",4,"ngIf"],[1,"btn","btn-secondary","mt-2",3,"click"],[1,"img-wrap","mt-2"],["alt","",3,"src"],[1,"close",3,"id","click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"h2"),e._uU(4,"Trees"),e.qZA()(),e.TgZ(5,"form",2)(6,"div",3)(7,"label",4),e._uU(8,"Name"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div",3)(11,"label",6),e._uU(12,"Scientific Name"),e.qZA(),e._UZ(13,"input",7),e.qZA(),e.TgZ(14,"div",3)(15,"label",8),e._uU(16,"Use"),e.qZA(),e._UZ(17,"input",9),e.qZA(),e.YNc(18,Z,4,6,"div",10),e.TgZ(19,"div",3)(20,"label",11),e._uU(21,"Notes"),e.qZA(),e._UZ(22,"textarea",12),e.qZA(),e.YNc(23,v,3,2,"div",13),e.TgZ(24,"div",3)(25,"button",14),e.NdJ("click",function(){return i.image()}),e._uU(26," Add Image "),e.qZA()(),e.TgZ(27,"button",15),e.NdJ("click",function(){return i.saveForm()}),e._uU(28,"Save"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",i.treeForm),e.xp6(13),e.Q6J("ngForOf",i.filters),e.xp6(5),e.Q6J("ngForOf",i.imagesArray))},dependencies:[h.sg,h.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,p.W2,P.w9],styles:[".img-wrap[_ngcontent-%COMP%]{position:relative}img[_ngcontent-%COMP%]{height:300px}.none[_ngcontent-%COMP%]{display:none}.img-wrap[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:21px;z-index:100;color:red;font-size:xx-large;cursor:pointer}.form-group[_ngcontent-%COMP%]{margin-top:10px}"]}),n})();function W(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",6)(6,"button",7)(7,"span",8),e._uU(8," edit "),e.qZA()(),e.TgZ(9,"button",9),e.NdJ("click",function(){const f=e.CHM(t).$implicit,A=e.oxw();return e.KtG(A.deleteTree(f.id))}),e.TgZ(10,"span",8),e._uU(11," delete "),e.qZA()()()()}if(2&n){const t=g.$implicit,i=g.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.MGl("routerLink","/admin/trees/create/",t.id,"")}}const H=[{path:"create/:id",component:B},{path:"create",component:B},{path:"",component:(()=>{class n{constructor(t,i){this.treesService=t,this.alertController=i,this.subscriptions=[],this.trees=[]}ngOnInit(){}ionViewDidEnter(){const t=this.getTrees().subscribe(i=>{this.trees=i.data});this.subscriptions.push(t)}getTrees(){return this.treesService.getTrees()}deleteTree(t){var i=this;return(0,U.Z)(function*(){yield(yield i.alertController.create({header:"Do you want to delete this tree?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Delete",role:"confirm",handler:()=>{const f=i.treesService.deleteTree(t).subscribe(A=>{i.trees=i.trees.filter(c=>c.id!==t)});i.subscriptions.push(f)}}]})).present()})()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.z),e.Y36(p.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:18,vars:1,consts:[[1,"container"],[1,"header","d-flex","justify-content-between"],["routerLink","/admin/trees/create",1,"btn","btn-primary"],[1,"table-responsive"],[1,"table-striped","w-100"],[4,"ngFor","ngForOf"],[1,"p-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"material-icons-outlined"],[1,"btn","btn-danger","ms-1",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"h2"),e._uU(4,"Trees"),e.qZA(),e.TgZ(5,"button",2),e._uU(6," Add Tree "),e.qZA()(),e.TgZ(7,"div",3)(8,"table",4)(9,"thead")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Actions"),e.qZA()(),e.TgZ(16,"tbody"),e.YNc(17,W,12,3,"tr",5),e.qZA()()()()()),2&t&&(e.xp6(17),e.Q6J("ngForOf",i.trees))},dependencies:[h.sg,y.rH,p.W2,p.YI]}),n})()}];let V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[y.Bz.forChild(H),y.Bz]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.ez,V,a.UX,p.Pc,P.A0]}),n})()}}]);